@using BlazorApp.Data
@using BlazorApp

@page "/tilfojprodukt"

<h3>Add Hardware Produkt</h3>

@if (gemt)
{
    <p>The Product is saved!</p>
}
else
{
    <form @onsubmit="GemProdukt">

        <label>Product Name:</label>
        <input @bind="nytProdukt.Name" />

        <label>Description:</label>
        <textarea @bind="nytProdukt.Description"></textarea>

        <label>Price:</label>
        <input type="number" @bind="nytProdukt.Price" />

        <!-- Tilføj flere input-felter efter behov -->

        <button type="submit">Save Product</button>
    </form>
}

@code {
    private Hardware nytProdukt = new Hardware();
    private bool gemt = false;

    DatabaseManager dbManager;

    // Metode kaldet ved siden initialisering.
    protected override void OnInitialized()
    {
        dbManager = new DatabaseManager();
    }

    private void GemProdukt()
    {
        // Gem produktet i databasen ved at bruge DatabaseService
        // Du skal implementere koden til at gemme dataene i din SQL-database her

        // Kald AddHardware-metoden fra DatabaseService for at gemme produktet
        // DbContext.AddHardware(new Hardware
        //     {
        //         Name = nytProdukt.Name,
        //         Price = nytProdukt.Price,
        //         SellerId = DbContext.GetSellers().FirstOrDefault(s => s.Name == nytProdukt.SellerName)?.SellerId ?? 0
        //         // Du skal tilpasse dette afhængigt af din model og databasestruktur
        //     });

        dbManager.AddHardware(new Hardware
            {
                Name = nytProdukt.Name,
                Price = nytProdukt.Price,
                SellerId = dbManager.GetSellers().FirstOrDefault(s => s.Name == nytProdukt.SellerName)?.SellerId ?? 0

            });

        
        gemt = true;
    }

}
